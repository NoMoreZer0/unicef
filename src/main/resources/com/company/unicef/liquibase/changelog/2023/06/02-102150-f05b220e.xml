<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.11.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1" author="unicef">
        <createTable tableName="ALL_FILES">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_ALL_FILES"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="FILE_" type="VARCHAR(1024)"/>
        </createTable>
    </changeSet>
    <changeSet id="2" author="unicef">
        <createTable tableName="EVENT_TABLE">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_EVENT_TABLE"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="DATE_" type="DATE"/>
            <column name="STARTING_PERIOD" type="DATE"/>
            <column name="ENDING_PERIOD" type="DATE"/>
            <column name="RATING" type="INT"/>
            <column name="SECOND_FORM_CHECK_BOX_ID" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet id="3" author="unicef">
        <createTable tableName="OPEN_CASE">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_OPEN_CASE"/>
            </column>
            <column name="STUDENT_ID" type="UUID"/>
            <column name="REASON" type="VARCHAR(255)"/>
            <column name="OPENING_DATE" type="DATE"/>
            <column name="STATUS" type="VARCHAR(255)"/>
            <column name="WHO_STARTED" type="VARCHAR(255)"/>
            <column name="SECOND_FORM_ID" type="BIGINT"/>
            <column name="DOCUMENT" type="VARCHAR(1024)"/>
        </createTable>
    </changeSet>
    <changeSet id="4" author="unicef">
        <createTable tableName="RESULT_">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_RESULT_"/>
            </column>
            <column name="RESULT_TEXT" type="VARCHAR(255)"/>
            <column name="EVENT_ID" type="UUID"/>
        </createTable>
    </changeSet>
    <changeSet id="5" author="unicef">
        <createTable tableName="SECOND_FORM">
            <column name="ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_SECOND_FORM"/>
            </column>
            <column name="UUID" type="UUID"/>
            <column name="CHILD_ID_NUM" type="VARCHAR(255)"/>
            <column name="CHILD_MOBILE_PHONE" type="VARCHAR(11)"/>
            <column name="EDUCATION_INSTITUTION" type="VARCHAR(255)"/>
            <column name="CASE_MANAGER" type="VARCHAR(255)"/>
            <column name="CONTACT_NUMBER" type="VARCHAR(255)"/>
            <column name="HEALTH_CHRONICAL" type="BOOLEAN"/>
            <column name="HEALTH_NO_REGISTERED" type="BOOLEAN"/>
            <column name="HEALTH_NO_VACCINATION" type="BOOLEAN"/>
            <column name="HEALTH_DISABLED_NO_HELP" type="BOOLEAN"/>
            <column name="HEALTH_NO_HOSPITAL" type="BOOLEAN"/>
            <column name="HEALTH_NO_TESTING" type="BOOLEAN"/>
            <column name="HEALTH_NO_FOOD" type="BOOLEAN"/>
            <column name="HEALTH_NO_SPORT" type="BOOLEAN"/>
            <column name="HEALTH_NO_EQUIPMENT" type="BOOLEAN"/>
            <column name="HEALTH_NO_COORDINATION" type="BOOLEAN"/>
            <column name="HEALTH_BAD_WEIGHT_OR_HEIGHT" type="BOOLEAN"/>
            <column name="HEALTH_FOBIA" type="BOOLEAN"/>
            <column name="HEALTH_BAD_HABITS" type="BOOLEAN"/>
            <column name="HEALTH_WETS_BED" type="BOOLEAN"/>
            <column name="HEALTH_BAD_SLEEP" type="BOOLEAN"/>
            <column name="HEALTH_HAS_TRAUMA" type="BOOLEAN"/>
            <column name="HEALTH_BAD_COMMUNICATION" type="BOOLEAN"/>
            <column name="HEAL_OTHERS" type="VARCHAR(255)"/>
            <column name="EDU_NOT_LIKE" type="BOOLEAN"/>
            <column name="EDU_NO_SUBJECT" type="BOOLEAN"/>
            <column name="EDU_WORKING" type="BOOLEAN"/>
            <column name="EDU_NO_DISCIPLINE" type="BOOLEAN"/>
            <column name="EDU_SCHOOL_FRIEND" type="BOOLEAN"/>
            <column name="EDU_SPECIAL_NEEDS" type="BOOLEAN"/>
            <column name="EDU_DIFFICULT_PROGRAM" type="BOOLEAN"/>
            <column name="EDU_FREQ_ABSENT" type="BOOLEAN"/>
            <column name="EDU_NO_ATTENTION" type="BOOLEAN"/>
            <column name="EDU_NO_CLUB" type="VARCHAR(255)"/>
            <column name="EDU_NO_STATIONERY" type="BOOLEAN"/>
            <column name="EDU_NO_LAPTOP" type="BOOLEAN"/>
            <column name="EDU_NO_UNIFORM" type="BOOLEAN"/>
            <column name="EDU_CONFLICT" type="BOOLEAN"/>
            <column name="EDU_NO_DESK" type="BOOLEAN"/>
            <column name="EDU_AMORAL_ABSENT" type="BOOLEAN"/>
            <column name="EDU_LOW_MOTIVATION" type="BOOLEAN"/>
            <column name="EDU_OTHERS" type="VARCHAR(255)"/>
            <column name="EMO_NO_STABILITY" type="BOOLEAN"/>
            <column name="EMO_ANXIETY" type="BOOLEAN"/>
            <column name="EMO_NO_FRIENDS" type="BOOLEAN"/>
            <column name="EMO_DEPRESSION" type="BOOLEAN"/>
            <column name="EMO_BULLYING" type="BOOLEAN"/>
            <column name="EMO_OUTSIDE_OF_HOME" type="BOOLEAN"/>
            <column name="EMO_ALONE" type="BOOLEAN"/>
            <column name="EMO_SELF_HARASSMENT" type="BOOLEAN"/>
            <column name="EMO_RAN_AWAY" type="BOOLEAN"/>
            <column name="EMO_IS_BULLY" type="BOOLEAN"/>
            <column name="EMO_RISKING_ACTION" type="BOOLEAN"/>
            <column name="EMO_CONFLICT_WITNESS" type="BOOLEAN"/>
            <column name="EMO_NO_EMOTION_CONTROL" type="BOOLEAN"/>
            <column name="EMO_SUICIDIAL" type="BOOLEAN"/>
            <column name="EMO_SUICIDIAL_ATTEMPT" type="BOOLEAN"/>
            <column name="EMO_STEALS" type="BOOLEAN"/>
            <column name="EMO_ON_REGISTER" type="BOOLEAN"/>
            <column name="EMO_AGGRESSOR" type="BOOLEAN"/>
            <column name="EMO_NO_BAD_NO_GOOD" type="BOOLEAN"/>
            <column name="EMO_NOT_NORMAL" type="BOOLEAN"/>
            <column name="EMO_OTHERS" type="VARCHAR(255)"/>
            <column name="IDENT_DISCRIMINATION" type="BOOLEAN"/>
            <column name="IDENT_NO_FAMILY" type="BOOLEAN"/>
            <column name="IDENT_GENDER_CONF" type="BOOLEAN"/>
            <column name="IDENT_GENDER_DONT_KNOW" type="BOOLEAN"/>
            <column name="IDENT_POSITIVE_INDIVIDUAL" type="BOOLEAN"/>
            <column name="IDENT_AGE_SOL" type="BOOLEAN"/>
            <column name="IDENT_NOT_SURE_MYSELF" type="BOOLEAN"/>
            <column name="IDENT_NOT_SATISFIED" type="BOOLEAN"/>
            <column name="IDENT_NO_CULTURAL" type="BOOLEAN"/>
            <column name="IDENT_NOT_INDEPENDENT" type="BOOLEAN"/>
            <column name="IDENT_NO_HYGIENE" type="BOOLEAN"/>
            <column name="IDENT_OTHERS" type="VARCHAR(255)"/>
            <column name="FAMILY_NO_RELATIONSHIP" type="BOOLEAN"/>
            <column name="FAMILY_NO_ADULT" type="BOOLEAN"/>
            <column name="FAMILY_DOMESTIC_VIOLENCE" type="BOOLEAN"/>
            <column name="FAMILY_NO_CONNECTION" type="BOOLEAN"/>
            <column name="FAMILY_BAD_REVIEW" type="BOOLEAN"/>
            <column name="FAMILY_BAD_FRIENDS" type="BOOLEAN"/>
            <column name="FAMILY_NO_SKILLS" type="BOOLEAN"/>
            <column name="FAMILY_CHILD_IS_ADULT" type="BOOLEAN"/>
            <column name="FAMILY_DIFFERENT_PARENTS" type="BOOLEAN"/>
            <column name="FAMILY_CHILD_CONFLICT" type="BOOLEAN"/>
            <column name="FAMILY_NO_TIME_COMMUNICATION" type="BOOLEAN"/>
            <column name="FAMILY_AWAY_FROM_PARENTS" type="BOOLEAN"/>
            <column name="FAMILY_SEXUAL_PROBLEMS" type="BOOLEAN"/>
            <column name="FAMILY_CHILD_PARENT_CONFLICT" type="BOOLEAN"/>
            <column name="FAMILY_CHRONICAL_DISEASE" type="BOOLEAN"/>
            <column name="FAMILY_HAS_JAIL" type="BOOLEAN"/>
            <column name="FAMILY_HAS_TRAUMA" type="BOOLEAN"/>
            <column name="FAMILY_OTHERS" type="VARCHAR(255)"/>
            <column name="SELF_NO_PHYSICIAL_ACTIVITY" type="BOOLEAN"/>
            <column name="SELF_NO_PRACTICAL_SKILLS" type="BOOLEAN"/>
            <column name="SELF_NO_MONEY" type="BOOLEAN"/>
            <column name="SELF_NO_HELP" type="BOOLEAN"/>
            <column name="SELF_OTHERS" type="VARCHAR(255)"/>
            <column name="PARENTS_NO_BASIC" type="BOOLEAN"/>
            <column name="PARENTS_NO_DAILY_ROUTINE" type="BOOLEAN"/>
            <column name="PARENTS_NO_SPACE" type="BOOLEAN"/>
            <column name="PARENTS_NO_CHILD_HEALTH" type="BOOLEAN"/>
            <column name="PARENTS_NO_PRAISED" type="BOOLEAN"/>
            <column name="PARENTS_NO_SCHOOL" type="BOOLEAN"/>
            <column name="PARENTS_DONT_KNOW" type="BOOLEAN"/>
            <column name="PARENTS_DONT_CARE" type="BOOLEAN"/>
            <column name="PARENT_NO_DISCIPLINE" type="BOOLEAN"/>
            <column name="PARENTS_OTHERS" type="VARCHAR(255)"/>
            <column name="HOME_NO_HOME" type="BOOLEAN"/>
            <column name="HOME_EVICTION" type="BOOLEAN"/>
            <column name="HOME_DANGER" type="BOOLEAN"/>
            <column name="HOME_NO_JOB" type="BOOLEAN"/>
            <column name="HOME_NO_BENEFITS" type="BOOLEAN"/>
            <column name="HOME_NO_MONEY" type="BOOLEAN"/>
            <column name="HOME_OTHERS" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="6" author="unicef">
        <createTable tableName="SECOND_FORM_CHECK_BOX">
            <column name="ID" type="UUID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK_SECOND_FORM_CHECK_BOX"/>
            </column>
            <column name="NAME" type="VARCHAR(255)"/>
            <column name="GOAL_TEXT" type="VARCHAR(255)"/>
            <column name="OPEN_CASE_ID" type="UUID">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="7" author="unicef">
        <addColumn tableName="USER_">
            <column name="EVENT_ID" type="UUID"/>
            <column name="OPEN_CASE_ID" type="UUID"/>
            <column name="PHONE_NUMBER" type="VARCHAR(255)"/>
            <column name="ROLE" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
<!--    <changeSet id="8" author="unicef">-->
<!--        <addColumn tableName="STUDENT">-->
<!--            <column name="SCHOOL" type="VARCHAR(255)"/>-->
<!--            <column name="STUDY_LANG" type="VARCHAR(255)"/>-->
<!--        </addColumn>-->
<!--    </changeSet>-->
    <changeSet id="9" author="unicef">
        <createIndex indexName="IDX_EVENT_SECOND_FORM_CHECK_BOX" tableName="EVENT_TABLE">
            <column name="SECOND_FORM_CHECK_BOX_ID"/>
        </createIndex>

        <addForeignKeyConstraint baseColumnNames="SECOND_FORM_CHECK_BOX_ID" baseTableName="EVENT_TABLE"
                                 constraintName="FK_EVENT_TABLE_ON_SECOND_FORM_CHECK_BOX" onDelete="CASCADE"
                                 referencedColumnNames="ID" referencedTableName="SECOND_FORM_CHECK_BOX"/>
    </changeSet>
    <changeSet id="10" author="unicef">
        <createIndex indexName="IDX_OPEN_CASE_SECOND_FORM" tableName="OPEN_CASE">
            <column name="SECOND_FORM_ID"/>
        </createIndex>

        <addForeignKeyConstraint baseColumnNames="SECOND_FORM_ID" baseTableName="OPEN_CASE"
                                 constraintName="FK_OPEN_CASE_ON_SECOND_FORM" referencedColumnNames="ID"
                                 referencedTableName="SECOND_FORM"/>
    </changeSet>
<!--    <changeSet id="11" author="unicef">-->
<!--        <createIndex indexName="IDX_OPEN_CASE_STUDENT" tableName="OPEN_CASE">-->
<!--            <column name="STUDENT_ID"/>-->
<!--        </createIndex>-->

<!--        <addForeignKeyConstraint baseColumnNames="STUDENT_ID" baseTableName="OPEN_CASE"-->
<!--                                 constraintName="FK_OPEN_CASE_ON_STUDENT" onDelete="CASCADE" referencedColumnNames="ID"-->
<!--                                 referencedTableName="STUDENT"/>-->
<!--    </changeSet>-->
    <changeSet id="12" author="unicef">
        <createIndex indexName="IDX_RESULT__EVENT" tableName="RESULT_">
            <column name="EVENT_ID"/>
        </createIndex>

        <addForeignKeyConstraint baseColumnNames="EVENT_ID" baseTableName="RESULT_" constraintName="FK_RESULT__ON_EVENT"
                                 onDelete="CASCADE" referencedColumnNames="ID" referencedTableName="EVENT_TABLE"/>
    </changeSet>
    <changeSet id="13" author="unicef">
        <createIndex indexName="IDX_SECOND_FORM_CHECK_BOX_OPEN_CASE" tableName="SECOND_FORM_CHECK_BOX">
            <column name="OPEN_CASE_ID"/>
        </createIndex>

        <addForeignKeyConstraint baseColumnNames="OPEN_CASE_ID" baseTableName="SECOND_FORM_CHECK_BOX"
                                 constraintName="FK_SECOND_FORM_CHECK_BOX_ON_OPEN_CASE" onDelete="CASCADE"
                                 referencedColumnNames="ID" referencedTableName="OPEN_CASE"/>
    </changeSet>
    <changeSet id="14" author="unicef">
        <createIndex indexName="IDX_USER__EVENT" tableName="USER_">
            <column name="EVENT_ID"/>
        </createIndex>

        <addForeignKeyConstraint baseColumnNames="EVENT_ID" baseTableName="USER_" constraintName="FK_USER__ON_EVENT"
                                 referencedColumnNames="ID" referencedTableName="EVENT_TABLE"/>
    </changeSet>
    <changeSet id="15" author="unicef">
        <createIndex indexName="IDX_USER__OPEN_CASE" tableName="USER_">
            <column name="OPEN_CASE_ID"/>
        </createIndex>

        <addForeignKeyConstraint baseColumnNames="OPEN_CASE_ID" baseTableName="USER_"
                                 constraintName="FK_USER__ON_OPEN_CASE" referencedColumnNames="ID"
                                 referencedTableName="OPEN_CASE"/>
    </changeSet>
</databaseChangeLog>